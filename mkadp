#!/system/bin/sh
#=======================================#
#VARIABLES===============================#
BB=/data/adb/magisk/busybox
LOGZR=/data/media/0/blzram.log
LOG=/data/media/0/mkadp.log
MODE=/data/media/0/modeon.log
NEWLOG=/data/local/mkadp.log
NEWLOG2=/data/media/0/.mkadp.log
LOGFU=/data/media/0/butterlimits.log
BRANCH="999-Uninistall-ButterLimits-Completely"
#=======================================#
#=======================================#

rm $LOG
rm $MODE
rm $NEWLOG
rm $NEWLOG2
rm $LOGFU
rm $LOGZR
rm /data/system/overlays.xml

cmd appops set com.google.android.gms BOOT_COMPLETED allow
cmd appops set com.google.android.ims BOOT_COMPLETED allow
cmd appops set com.google.android.gsf WAKE_LOCK allow
cmd appops set com.google.android.gms AUTO_START allow
cmd appops set com.google.android.ims AUTO_START allow
cmd appops set com.google.android.ims WAKE_LOCK allow

pm enable com.google.android.gms/com.google.android.gms.mdm.receivers.MdmDeviceAdminReceiver
pm enable com.google.android.gms/com.google.android.gms.auth.managed.admin.DeviceAdminReceiver
pm enable com.google.android.gms/com.google.android.gms.auth.setup.devicesignals.LockScreenService
pm enable com.google.android.gms/com.google.android.gms.mdm.receivers.MdmDeviceAdminReceiver

if [ "$(pidof com.google.android.gms | wc -l)" -eq "1" ]; then
	kill $(pidof com.google.android.gms);
fi;
if [ "$(pidof com.google.android.gms.unstable | wc -l)" -eq "1" ]; then
	kill $(pidof com.google.android.gms.unstable);
fi;
if [ "$(pidof com.google.android.gms.persistent | wc -l)" -eq "1" ]; then
	kill $(pidof com.google.android.gms.persistent);
fi;
if [ "$(pidof com.google.android.gms.wearable | wc -l)" -eq "1" ]; then
	kill $(pidof com.google.android.gms.wearable);
fi;

pm disable com.google.android.gms/.ads.AdRequestBrokerService
pm disable com.google.android.gms/.ads.identifier.service.AdvertisingIdService
pm disable com.google.android.gms/.ads.social.GcmSchedulerWakeupService
pm disable com.google.android.gms/.analytics.AnalyticsService
pm disable com.google.android.gms/.analytics.service.PlayLogMonitorIntervalService
pm disable com.google.android.gms/.backup.BackupTransportService
pm disable com.google.android.gms/.update.SystemUpdateService$ActiveReceiver
pm disable com.google.android.gms/.update.SystemUpdateService$Receiver
pm disable com.google.android.gms/.update.SystemUpdateService$SecretCodeReceiver
pm disable com.google.android.gms/.thunderbird.settings.ThunderbirdSettingInjectorService
pm disable com.google.android.gsf/.update.SystemUpdateActivity
pm disable com.google.android.gsf/.update.SystemUpdatePanoActivity
pm disable com.google.android.gms/com.google.android.gms.analytics.AnalyticsReceiver
pm disable com.google.android.gms/com.google.android.gms.analytics.AnalyticsService
pm disable com.google.android.gms/com.google.android.gms.analytics.AnalyticsTaskService
pm disable com.google.android.gms/com.google.android.gms.analytics.service.AnalyticsService
pm disable com.google.android.gms/com.google.android.gms.chimera.PersistentIntentOperationService
pm disable com.google.android.gms/com.google.android.gms.clearcut.debug.ClearcutDebugDumpService
pm disable com.google.android.gms/com.google.android.gms.common.stats.GmsCoreStatsService
pm disable com.google.android.gms/com.google.android.gms.mdm.receivers.MdmDeviceAdminReceiver
pm disable com.google.android.gms/com.google.android.gms.measurement.AppMeasurementJobService
pm disable com.google.android.gms/com.google.android.gms.measurement.AppMeasurementInstallReferrerReceiver
pm disable com.google.android.gms/com.google.android.gms.measurement.PackageMeasurementReceiver
pm disable com.google.android.gms/com.google.android.gms.measurement.PackageMeasurementService
pm disable com.google.android.gms/com.google.android.gms.measurement.service.MeasurementBrokerService
pm disable com.google.android.gms/com.google.android.location.internal.AnalyticsSamplerReceiver
pm enable --user 0 com.google.android.gms/.phenotype.service.sync.PhenotypeConfigurator;
pm enable com.google.android.gms/.common.config.PhenotypeCheckinService
sleep 1
pm disable com.google.android.gms/.ads.settings.AdsSettingsActivity
pm disable com.google.android.gms/com.google.android.location.places.ui.aliaseditor.AliasEditorActivity
pm disable com.google.android.gms/com.google.android.location.places.ui.aliaseditor.AliasEditorMapActivity
pm disable com.google.android.gms/com.google.android.location.settings.ActivityRecognitionPermissionActivity
pm disable com.google.android.gms/com.google.android.location.settings.GoogleLocationSettingsActivity
pm disable com.google.android.gms/com.google.android.location.settings.LocationHistorySettingsActivity
pm disable com.google.android.gms/com.google.android.location.settings.LocationSettingsCheckerActivity
pm disable com.google.android.gms/.usagereporting.settings.UsageReportingActivity
pm disable com.google.android.gms/.ads.adinfo.AdvertisingInfoContentProvider
pm disable com.google.android.gms/com.google.android.location.reporting.service.ReportingContentProvider
pm disable com.google.android.gms/com.google.android.location.internal.LocationContentProvider
pm disable com.google.android.gms/.common.stats.net.contentprovider.NetworkUsageContentProvider
pm disable com.google.android.gms/com.google.android.gms.ads.config.GServicesChangedReceiver
pm disable com.google.android.gms/com.google.android.contextmanager.systemstate.SystemStateReceiver
pm disable com.google.android.gms/.ads.jams.SystemEventReceiver
pm disable com.google.android.gms/.ads.config.FlagsReceiver
pm disable com.google.android.gms/.ads.social.DoritosReceiver
pm disable com.google.android.gms/.analytics.AnalyticsReceiver
pm disable com.google.android.gms/.analytics.internal.GServicesChangedReceiver
pm disable com.google.android.gms/.common.analytics.CoreAnalyticsReceiver
pm disable com.google.android.gms/.common.stats.GmsCoreStatsService
pm disable com.google.android.gms/.common.stats.GmsCoreStatsServiceLauncher
pm disable com.google.android.gms/com.google.android.location.internal.AnalyticsSamplerReceiver
pm disable com.google.android.gms/.checkin.CheckinService$ActiveReceiver
pm disable com.google.android.gms/.checkin.CheckinService$ClockworkFallbackReceiver
pm disable com.google.android.gms/.checkin.CheckinService$ImposeReceiver
pm disable com.google.android.gms/.checkin.CheckinService$SecretCodeReceiver
pm disable com.google.android.gms/.checkin.CheckinService$TriggerReceiver
pm disable com.google.android.gms/.checkin.EventLogService$Receiver
pm disable com.google.android.gms/com.google.android.location.reporting.service.ExternalChangeReceiver
pm disable com.google.android.gms/com.google.android.location.reporting.service.GcmRegistrationReceiver
pm disable com.google.android.gms/com.google.android.location.copresence.GcmRegistrationReceiver
pm disable com.google.android.gms/com.google.android.location.copresence.GservicesBroadcastReceiver
pm disable com.google.android.gms/com.google.android.location.internal.LocationProviderdisabler
pm disable com.google.android.gms/com.google.android.location.internal.NlpNetworkProviderSettingsUpdateReceiver
pm disable com.google.android.gms/com.google.android.location.network.ConfirmAlertActivity$LocationModeChangingReceiver
pm disable com.google.android.gms/com.google.android.location.places.ImplicitSignalsReceiver
pm disable com.google.android.gms/com.google.android.libraries.social.mediamonitor.MediaMonitor
pm disable com.google.android.gms/.location.copresence.GcmBroadcastReceiver
pm disable com.google.android.gms/.location.reporting.service.GcmBroadcastReceiver
pm disable com.google.android.gms/.social.location.GservicesBroadcastReceiver
pm disable com.google.android.gms/.update.SystemUpdateService$Receiver
pm disable com.google.android.gms/.update.SystemUpdateService$OtaPolicyReceiver
pm disable com.google.android.gms/.update.SystemUpdateService$SecretCodeReceiver
pm disable com.google.android.gms/.update.SystemUpdateService$ActiveReceiver
pm disable com.google.android.gms/com.google.android.contextmanager.service.ContextManagerService
pm disable com.google.android.gms/.ads.AdRequestBrokerService
pm disable com.google.android.gms/.ads.GservicesValueBrokerService
pm disable com.google.android.gms/.ads.identifier.service.AdvertisingIdNotificationService
pm disable com.google.android.gms/.ads.identifier.service.AdvertisingIdService
pm disable com.google.android.gms/.ads.jams.NegotiationService
pm disable com.google.android.gms/.ads.pan.PanService
pm disable com.google.android.gms/.ads.social.GcmSchedulerWakeupService
pm disable com.google.android.gms/.analytics.AnalyticsService
pm disable com.google.android.gms/.analytics.internal.PlayLogReportingService
pm disable com.google.android.gms/.analytics.service.AnalyticsService
pm disable com.google.android.gms/.analytics.service.PlayLogMonitorIntervalService
pm disable com.google.android.gms/.analytics.service.RefreshdisabledStateService
pm disable com.google.android.gms/.auth.be.proximity.authorization.userpresence.UserPresenceService
pm disable com.google.android.gms/.common.analytics.CoreAnalyticsIntentService
pm disable com.google.android.gms/.common.stats.GmsCoreStatsService
pm disable com.google.android.gms/.backup.BackupStatsService
pm disable com.google.android.gms/.deviceconnection.service.DeviceConnectionAsyncService
pm disable com.google.android.gms/.deviceconnection.service.DeviceConnectionServiceBroker
pm disable com.google.android.gms/.wallet.service.analytics.AnalyticsIntentService
pm disable com.google.android.gms/.checkin.CheckinService
pm disable com.google.android.gms/.checkin.EventLogService
pm disable com.google.android.gms/com.google.android.location.internal.AnalyticsUploadIntentService
pm disable com.google.android.gms/com.google.android.location.reporting.service.DeleteHistoryService
pm disable com.google.android.gms/com.google.android.location.reporting.service.DispatchingService
pm disable com.google.android.gms/com.google.android.location.reporting.service.InternalPreferenceServiceDoNotUse
pm disable com.google.android.gms/com.google.android.location.reporting.service.LocationHistoryInjectorService
pm disable com.google.android.gms/com.google.android.location.reporting.service.ReportingAndroidService
pm disable com.google.android.gms/com.google.android.location.reporting.service.ReportingSyncService
pm disable com.google.android.gms/com.google.android.location.activity.HardwareArProviderService
pm disable com.google.android.gms/com.google.android.location.fused.FusedLocationService
pm disable com.google.android.gms/com.google.android.location.fused.service.FusedProviderService
pm disable com.google.android.gms/com.google.android.location.geocode.GeocodeService
pm disable com.google.android.gms/com.google.android.location.geofencer.service.GeofenceProviderService
pm disable com.google.android.gms/com.google.android.location.internal.GoogleLocationManagerService
pm disable com.google.android.gms/com.google.android.location.places.PlaylogService
pm disable com.google.android.gms/com.google.android.location.places.service.GeoDataService
pm disable com.google.android.gms/com.google.android.location.places.service.PlaceDetectionService
pm disable com.google.android.gms/com.google.android.libraries.social.mediamonitor.MediaMonitorIntentService
pm disable com.google.android.gms/.config.ConfigService
pm disable com.google.android.gms/.stats.PlatformStatsCollectorService
pm disable com.google.android.gms/.usagereporting.service.UsageReportingService
pm disable com.google.android.gms/.update.SystemUpdateService
pm disable com.google.android.gms/com.google.android.location.network.ConfirmAlertActivity
pm disable com.google.android.gms/com.google.android.location.network.LocationProviderChangeReceiver
pm disable com.google.android.gms/com.google.android.location.internal.server.GoogleLocationService
pm disable com.google.android.gms/com.google.android.location.internal.PendingIntentCallbackService
pm disable com.google.android.gms/com.google.android.location.network.NetworkLocationService
pm disable com.google.android.gms/com.google.android.location.util.PreferenceService
pm disable com.google.android.gsf/.update.SystemUpdateActivity
pm disable com.google.android.gsf/.update.SystemUpdatePanoActivity
pm disable com.google.android.gsf/com.google.android.gsf.checkin.CheckinService\$Receiver
pm disable com.google.android.gsf/com.google.android.gsf.checkin.CheckinService\$SecretCodeReceiver
pm disable com.google.android.gsf/com.google.android.gsf.checkin.CheckinService\$TriggerReceiver
pm disable com.google.android.gsf/.checkin.EventLogService$Receiver
pm disable com.google.android.gsf/.update.SystemUpdateService$Receiver
pm disable com.google.android.gsf/.update.SystemUpdateService$SecretCodeReceiver
pm disable com.google.android.gsf/.checkin.CheckinService
pm disable com.google.android.gsf/.checkin.EventLogService
pm disable com.google.android.gsf/.update.SystemUpdateService
sleep 1
pm enable com.google.android.location.internal.UPLOAD_ANALYTICS
pm enable com.google.android.apps.wellbeing/.powerstate.impl.PowerStateJobService
pm enable com.google.android.apps.wellbeing/androidx.work.impl.background.systemjob.SystemJobService
pm enable com.facebook.katana/com.facebook.analytics.appstatelogger.AppStateIntentService
pm enable com.facebook.orca/com.facebook.analytics.apptatelogger.AppStateIntentService
pm enable com.facebook.orca/com.facebook.analytics2.Logger.LollipopUploadService
pm enable com.google.android.gms/com.google.android.gms.nearby.bootstrap.service.NearbyBootstrapService
pm enable com.google.android.gms/NearbyMessagesService
pm enable com.google.android.gms/com.google.android.gms.nearby.connection.service.NearbyConnectionsAndroidService
pm enable com.google.android.gms/com.google.location.nearby.direct.service.NearbyDirectService
pm enable com.google.android.gms/com.google.android.gms.lockbox.LockboxService
pm enable com.google.android.gms/.measurement.PackageMeasurementTaskService
pm enable com.google.android.gms/com.google.android.gms.auth.trustagent.GoogleTrustAgent
sleep 1
pm disable 'com.android.vending/com.google.firebase.iid.FirebaseInstanceIdInternalReceiver'
pm disable 'com.android.vending/com.google.firebase.iid.FirebaseInstanceIdReceiver'
pm disable 'com.google.android.gms/com.google.android.gms.gcm.nts.SchedulerInternalReceiver'
pm disable 'com.google.android.gms/com.google.android.gms.gcm.nts.SchedulerReceiver'
pm disable 'com.google.android.gms/.update.SystemUpdateService'; sleep 1;
pm disable 'com.google.android.gms/com.google.android.gms.analytics.service.AnalyticsService'
pm disable 'com.google.android.gms/com.google.android.gms.analytics.AnalyticsService'
pm disable 'com.google.android.gms/com.google.android.gms.analytics.AnalyticsTaskService'
pm disable 'com.google.android.gms/com.google.android.gms.measurement.AppMeasurementJobService'
pm disable 'com.google.android.syncadapters.contacts/com.google.android.gms.analytics.AnalyticsJobService'
pm disable 'com.google.android.syncadapters.contacts/com.google.android.gms.analytics.AnalyticsService'
pm disable 'com.google.android.gms/com.google.android.gms.gcm.HeartbeatAlarm$ConnectionInfoPersistService'
pm disable 'com.google.android.gms/com.google.android.gms.chimera.PersistentIntentOperationService'
pm enable 'com.google.android.gsf/.update.SystemUpdateService'
pm enable 'com.android.vending/com.google.android.gms.measurement.AppMeasurementReceiver'
pm enable 'com.google.android.gms/.update.SystemUpdateActivity'
pm enable 'com.google.android.gms/.update.SystemUpdateService$ActiveReceiver'
pm enable 'com.google.android.gms/.update.SystemUpdateService$Receiver'
pm enable 'com.google.android.gms/.update.SystemUpdateService$SecretCodeReceiver'
pm enable 'com.google.android.gms/com.google.android.gms.analytics.AnalyticsReceiver'
pm enable 'com.google.android.gms/com.google.android.gms.measurement.AppMeasurementInstallReferrerReceiver'
pm enable 'com.google.android.gms/com.google.android.gms.measurement.AppMeasurementReceiver'
pm enable 'com.google.android.gms/com.google.android.gms.measurement.AppMeasurementService'
pm enable 'com.google.android.gms/com.google.android.gms.measurement.PackageMeasurementReceiver'
pm enable 'com.google.android.gms/com.google.android.gms.measurement.PackageMeasurementService'
pm enable 'com.google.android.gms/com.google.android.gms.measurement.service.MeasurementBrokerService'
pm enable 'com.google.android.gms/com.google.android.location.internal.AnalyticsSamplerReceiver'
pm enable 'com.google.android.gsf/.update.SystemUpdateActivity'
pm enable 'com.google.android.gsf/.update.SystemUpdatePanoActivity'
pm enable 'com.google.android.gsf/.update.SystemUpdateService$Receiver'
pm enable 'com.google.android.gsf/.update.SystemUpdateService$SecretCodeReceiver'
sleep 1


$BB cp -rf /data/adb/modules/butterlimitsforop7poos11uni/system/etc/unbl/disable /data/adb/modules/butterlimitsforop7poos11uni/disable
$BB cp -rf /data/adb/modules/butterlimitsforop7poos11uni/system/etc/unbl/remove /data/adb/modules/butterlimitsforop7poos11uni/remove

sleep 5
reboot
